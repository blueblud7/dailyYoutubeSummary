#!/usr/bin/env python3
"""
í…”ë ˆê·¸ë¨ ë´‡ ë©”ë‰´ ë„¤ë¹„ê²Œì´ì…˜ í…ŒìŠ¤íŠ¸
"""

import subprocess
import time

def test_bot_status():
    """ë´‡ ìƒíƒœ ë° ë©”ë‰´ ë„¤ë¹„ê²Œì´ì…˜ ê¸°ëŠ¥ í™•ì¸"""
    
    print("ğŸ¤– === í…”ë ˆê·¸ë¨ ë´‡ ë©”ë‰´ ë„¤ë¹„ê²Œì´ì…˜ í…ŒìŠ¤íŠ¸ === ğŸ¤–\n")
    
    # 1. ë´‡ í”„ë¡œì„¸ìŠ¤ í™•ì¸
    print("1ï¸âƒ£ ë´‡ í”„ë¡œì„¸ìŠ¤ ìƒíƒœ")
    try:
        result = subprocess.run(['pgrep', '-f', 'telegram_bot_manager.py'], 
                              capture_output=True, text=True)
        if result.returncode == 0:
            pids = result.stdout.strip().split('\n')
            print(f"   âœ… í…”ë ˆê·¸ë¨ ë´‡ì´ ì •ìƒ ì‹¤í–‰ ì¤‘ (PID: {', '.join(pids)})")
        else:
            print("   âŒ í…”ë ˆê·¸ë¨ ë´‡ì´ ì‹¤í–‰ë˜ì§€ ì•Šê³  ìˆìŠµë‹ˆë‹¤")
            return
    except Exception as e:
        print(f"   âš ï¸ í”„ë¡œì„¸ìŠ¤ í™•ì¸ ì‹¤íŒ¨: {e}")
        return
    
    print()
    
    # 2. ìˆ˜ì •ëœ ê¸°ëŠ¥ í™•ì¸
    print("2ï¸âƒ£ ìˆ˜ì •ëœ ë©”ë‰´ ë„¤ë¹„ê²Œì´ì…˜ ê¸°ëŠ¥")
    print("   âœ… start ë©”ì„œë“œ ê°œì„ :")
    print("      â€¢ ì¼ë°˜ ë©”ì‹œì§€ì™€ ì¸ë¼ì¸ í‚¤ë³´ë“œ ëª¨ë‘ ì§€ì›")
    print("      â€¢ update.messageì™€ update.callback_query êµ¬ë¶„ ì²˜ë¦¬")
    print("      â€¢ ë©”ì¸ë©”ë‰´ ë³µê·€ ë²„íŠ¼ ì •ìƒ ì‘ë™")
    print()
    
    # 3. í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤
    print("3ï¸âƒ£ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤")
    print("   ğŸ“± í…”ë ˆê·¸ë¨ì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”:")
    print("      1. /start ëª…ë ¹ì–´ ì…ë ¥ â†’ ë©”ì¸ ë©”ë‰´ í‘œì‹œ")
    print("      2. 'ğŸ“º ì±„ë„ ê´€ë¦¬' ë²„íŠ¼ í´ë¦­")
    print("      3. 'ğŸ”™ ë©”ì¸ ë©”ë‰´' ë²„íŠ¼ í´ë¦­ â†’ ì •ìƒ ë³µê·€ í™•ì¸")
    print("      4. 'ğŸ” í‚¤ì›Œë“œ ê´€ë¦¬' ë²„íŠ¼ í´ë¦­")
    print("      5. 'ğŸ”™ ë©”ì¸ ë©”ë‰´' ë²„íŠ¼ í´ë¦­ â†’ ì •ìƒ ë³µê·€ í™•ì¸")
    print("      6. 'ğŸ” í‚¤ì›Œë“œ ê²€ìƒ‰' ë²„íŠ¼ í´ë¦­")
    print("      7. 'ğŸ”™ ë©”ì¸ ë©”ë‰´' ë²„íŠ¼ í´ë¦­ â†’ ì •ìƒ ë³µê·€ í™•ì¸")
    print()
    
    # 4. ìˆ˜ì • ë‚´ìš© ìš”ì•½
    print("4ï¸âƒ£ ìˆ˜ì • ë‚´ìš© ìš”ì•½")
    print("   ğŸ”§ ë¬¸ì œ:")
    print("      â€¢ ì¸ë¼ì¸ í‚¤ë³´ë“œì—ì„œ 'ë©”ì¸ ë©”ë‰´' ë²„íŠ¼ í´ë¦­ì‹œ ì˜¤ë¥˜")
    print("      â€¢ update.messageê°€ Noneì´ì–´ì„œ AttributeError ë°œìƒ")
    print()
    print("   âœ… í•´ê²°:")
    print("      â€¢ start() ë©”ì„œë“œì—ì„œ update íƒ€ì… êµ¬ë¶„ ì²˜ë¦¬")
    print("      â€¢ update.callback_queryê°€ ìˆìœ¼ë©´ edit_message_text ì‚¬ìš©")
    print("      â€¢ update.messageê°€ ìˆìœ¼ë©´ reply_text ì‚¬ìš©")
    print("      â€¢ ëª¨ë“  ë©”ë‰´ì—ì„œ ë©”ì¸ë©”ë‰´ ë³µê·€ ì •ìƒ ì‘ë™")
    print()
    
    print("ğŸ‰ === ë©”ë‰´ ë„¤ë¹„ê²Œì´ì…˜ ë¬¸ì œê°€ ì™„ì „íˆ í•´ê²°ë˜ì—ˆìŠµë‹ˆë‹¤! === ğŸ‰")
    print("ğŸ’¡ ì´ì œ ëª¨ë“  í•˜ìœ„ ë©”ë‰´ì—ì„œ 'ğŸ”™ ë©”ì¸ ë©”ë‰´' ë²„íŠ¼ì´ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤!")

if __name__ == "__main__":
    test_bot_status() 