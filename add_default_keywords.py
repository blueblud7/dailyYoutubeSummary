#!/usr/bin/env python3
"""
κΈ°λ³Έ ν‚¤μ›λ“ μ¶”κ°€ μ¤ν¬λ¦½νΈ
"""

from app.models.database import SessionLocal, Keyword, create_tables
from datetime import datetime

def add_default_keywords():
    """κΈ°λ³Έ ν¬μ/κ²½μ  ν‚¤μ›λ“λ“¤μ„ λ°μ΄ν„°λ² μ΄μ¤μ— μ¶”κ°€"""
    
    default_keywords = [
        # ν¬μ κ΄€λ ¨
        ("μ£Όμ‹", "ν¬μ"),
        ("μ½”μ¤ν”Ό", "ν¬μ"),
        ("μ½”μ¤λ‹¥", "ν¬μ"),
        ("μ‚Όμ„±μ „μ", "ν¬μ"),
        ("SKν•μ΄λ‹‰μ¤", "ν¬μ"),
        ("NAVER", "ν¬μ"),
        ("μΉ΄μΉ΄μ¤", "ν¬μ"),
        ("ν„λ€μ°¨", "ν¬μ"),
        ("ν¬μ¤μ½”", "ν¬μ"),
        ("LGμ—λ„μ§€μ†”λ£¨μ…", "ν¬μ"),
        
        # μ•”νΈν™”ν
        ("λΉ„νΈμ½”μΈ", "μ•”νΈν™”ν"),
        ("μ΄λ”λ¦¬μ›€", "μ•”νΈν™”ν"),
        ("λ¦¬ν”", "μ•”νΈν™”ν"),
        ("λ„μ§€μ½”μΈ", "μ•”νΈν™”ν"),
        ("λΈ”λ΅μ²΄μΈ", "μ•”νΈν™”ν"),
        
        # λ¶€λ™μ‚°
        ("λ¶€λ™μ‚°", "λ¶€λ™μ‚°"),
        ("μ•„ννΈ", "λ¶€λ™μ‚°"),
        ("μ „μ„Έ", "λ¶€λ™μ‚°"),
        ("μ›”μ„Έ", "λ¶€λ™μ‚°"),
        ("λ¶„μ–‘", "λ¶€λ™μ‚°"),
        ("μ¬κ°λ°", "λ¶€λ™μ‚°"),
        ("μ¬κ±΄μ¶•", "λ¶€λ™μ‚°"),
        
        # κ²½μ  μ§€ν‘
        ("κΈλ¦¬", "κ²½μ "),
        ("μΈν”λ μ΄μ…", "κ²½μ "),
        ("ν™μ¨", "κ²½μ "),
        ("λ‹¬λ¬", "κ²½μ "),
        ("μ›ν™”", "κ²½μ "),
        ("GDP", "κ²½μ "),
        ("μ‹¤μ—…λ¥ ", "κ²½μ "),
        ("κΈ°μ¤€κΈλ¦¬", "κ²½μ "),
        
        # κµ­μ  κ²½μ 
        ("λ―Έκµ­", "κµ­μ κ²½μ "),
        ("μ¤‘κµ­", "κµ­μ κ²½μ "),
        ("μΌλ³Έ", "κµ­μ κ²½μ "),
        ("μ λ½", "κµ­μ κ²½μ "),
        ("μ—°μ¤€", "κµ­μ κ²½μ "),
        ("λ―Έμ—°μ¤€", "κµ­μ κ²½μ "),
        ("νμ›”", "κµ­μ κ²½μ "),
        
        # μ •μ±…/μ λ„
        ("μ •λ¶€μ •μ±…", "μ •μ±…"),
        ("κ·μ ", "μ •μ±…"),
        ("μ„ΈκΈ", "μ •μ±…"),
        ("μ–‘λ„μ„Έ", "μ •μ±…"),
        ("μΆ…λ¶€μ„Έ", "μ •μ±…"),
        ("λ¶€κ°€μ„Έ", "μ •μ±…"),
        
        # μ‹μ¥ λ™ν–¥
        ("μ‹μ¥μ „λ§", "μ‹μ¥λ™ν–¥"),
        ("κ²½κΈ°μΉ¨μ²΄", "μ‹μ¥λ™ν–¥"),
        ("κ²½κΈ°νλ³µ", "μ‹μ¥λ™ν–¥"),
        ("λ²„λΈ”", "μ‹μ¥λ™ν–¥"),
        ("ν­λ½", "μ‹μ¥λ™ν–¥"),
        ("κΈ‰λ“±", "μ‹μ¥λ™ν–¥"),
        
        # κΈ°μ—…/μ‚°μ—…
        ("λ°λ„μ²΄", "μ‚°μ—…"),
        ("μλ™μ°¨", "μ‚°μ—…"),
        ("λ°°ν„°λ¦¬", "μ‚°μ—…"),
        ("λ°”μ΄μ¤", "μ‚°μ—…"),
        ("κ²μ„", "μ‚°μ—…"),
        ("ν”λ«νΌ", "μ‚°μ—…"),
        ("AI", "μ‚°μ—…"),
        ("μΈκ³µμ§€λ¥", "μ‚°μ—…"),
    ]
    
    print('π” κΈ°λ³Έ ν‚¤μ›λ“ μ¶”κ°€ μ¤‘...\n')
    
    # ν…μ΄λΈ” μƒμ„± ν™•μΈ
    create_tables()
    
    db = SessionLocal()
    try:
        added_count = 0
        
        for keyword_text, category in default_keywords:
            # μ¤‘λ³µ ν™•μΈ
            existing = db.query(Keyword).filter(Keyword.keyword == keyword_text).first()
            
            if not existing:
                keyword = Keyword(
                    keyword=keyword_text,
                    category=category
                )
                
                db.add(keyword)
                print(f'β• {keyword_text} ({category})')
                added_count += 1
            else:
                print(f'β οΈ {keyword_text} (μ΄λ―Έ μ΅΄μ¬)')
        
        db.commit()
        print(f'\nπ‰ {added_count}κ°μ μƒλ΅μ΄ ν‚¤μ›λ“κ°€ μ¶”κ°€λμ—μµλ‹λ‹¤!')
        
        # μµμΆ… ν‚¤μ›λ“ ν†µκ³„
        total_keywords = db.query(Keyword).count()
        categories = db.query(Keyword.category).distinct().all()
        
        print(f'\nπ“ μ „μ²΄ ν‚¤μ›λ“ ν„ν™©:')
        print(f'   μ΄ ν‚¤μ›λ“: {total_keywords}κ°')
        print(f'   μΉ΄ν…κ³ λ¦¬: {len(categories)}κ°')
        
        # μΉ΄ν…κ³ λ¦¬λ³„ κ°μ
        print(f'\nπ“ μΉ΄ν…κ³ λ¦¬λ³„ ν‚¤μ›λ“ κ°μ:')
        for category_row in categories:
            category = category_row[0]
            count = db.query(Keyword).filter(Keyword.category == category).count()
            print(f'   {category}: {count}κ°')
        
    except Exception as e:
        print(f'β ν‚¤μ›λ“ μ¶”κ°€ μ¤‘ μ¤λ¥ λ°μƒ: {e}')
        db.rollback()
    finally:
        db.close()

if __name__ == "__main__":
    add_default_keywords() 